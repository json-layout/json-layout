{
  "$id": "https://json-layout.github.io/normalized-layout-keyword",
  "title": "normalized layout",
  "oneOf": [
    {"$ref": "#/$defs/switch"},
    {"$ref": "#/$defs/comp-object"}
  ],
  "$defs": {
    "switch": {
      "type": "array",
      "items": {"$ref": "#/$defs/comp-object"}
    },
    "comp-object": {
      "type": "object",
      "discriminator": {"propertyName": "comp"},
      "required": ["comp"],
      "oneOf": [
        {"$ref": "#/$defs/none"},
        {"$ref": "#/$defs/section"},
        {"$ref": "#/$defs/text-field"},
        {"$ref": "#/$defs/number-field"},
        {"$ref": "#/$defs/textarea"},
        {"$ref": "#/$defs/checkbox"},
        {"$ref": "#/$defs/one-of-select"}
      ]
    },
    "none": {
      "type": "object",
      "additionalProperties": false,
      "required": ["comp"],
      "properties": {
        "comp": {"const": "none"},
        "if": {"$ref": "#/$defs/expression"}
      }
    },
    "section": {
      "type": "object",
      "additionalProperties": false,
      "required": ["comp"],
      "properties": {
        "comp": {"const": "section"},
        "if": {"$ref": "#/$defs/expression"},
        "title": {"type": "string"},
        "children": {
          "type": "array",
          "items": {"type": "string"}
        }
      }
    },
    "text-field": {
      "type": "object",
      "additionalProperties": false,
      "required": ["comp", "label"],
      "properties": {
        "comp": {"const": "text-field"},
        "if": {"$ref": "#/$defs/expression"},
        "label": {"type": "string"}
      }
    },
    "number-field": {
      "type": "object",
      "additionalProperties": false,
      "required": ["comp", "label"],
      "properties": {
        "comp": {"const": "number-field"},
        "if": {"$ref": "#/$defs/expression"},
        "label": {"type": "string"},
        "step": {"type": "number"}
      }
    },
    "textarea": {
      "type": "object",
      "additionalProperties": false,
      "required": ["comp", "label"],
      "properties": {
        "comp": {"const": "textarea"},
        "if": {"$ref": "#/$defs/expression"},
        "label": {"type": "string"}
      }
    },
    "checkbox": {
      "type": "object",
      "additionalProperties": false,
      "required": ["comp", "label"],
      "properties": {
        "comp": {"const": "checkbox"},
        "if": {"$ref": "#/$defs/expression"},
        "label": {"type": "string"}
      }
    },
    "one-of-select": {
      "type": "object",
      "additionalProperties": false,
      "required": ["comp"],
      "properties": {
        "comp": {"const": "one-of-select"},
        "if": {"$ref": "#/$defs/expression"},
        "label": {"type": "string"}
      }
    },
    "expression": {
      "type": "object",
      "required": ["type", "expr"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["expr-eval", "js-fn"],
          "default": "expr-eval"
        },
        "expr": {
          "type": "string"
        }
      }
    }
  }
}