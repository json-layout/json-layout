{
  "$id": "https://json-layout.github.io/normalized-layout-keyword",
  "title": "normalized layout",
  "oneOf": [
    {"$ref": "#/$defs/switch"},
    {"$ref": "#/$defs/comp-object"}
  ],
  "$defs": {
    "switch": {
      "type": "object",
      "required": ["switch"],
      "additionalProperties": false,
      "properties": {
        "switch": {
          "type": "array",
          "items": {"$ref": "#/$defs/comp-object"}
        }
      }
    },
    "comp-object": {
      "type": "object",
      "required": ["comp"],
      "unevaluatedProperties": false,
      "oneOf": [
        {"$ref": "#/$defs/none"},
        {"$ref": "#/$defs/list"},
        {"$ref": "#/$defs/text-field"},
        {"$ref": "#/$defs/number-field"},
        {"$ref": "#/$defs/textarea"},
        {"$ref": "#/$defs/checkbox"},
        {"$ref": "#/$defs/one-of-select"},
        {"$ref": "#/$defs/composite-comp-object"}
      ]
    },
    "composite-comp-object": {
      "type": "object",
      "oneOf": [
        {"$ref": "#/$defs/section"}
      ]
    },
    "none": {
      "type": "object",
      "required": ["comp"],
      "properties": {
        "comp": {"const": "none"},
        "if": {"$ref": "#/$defs/expression"}
      }
    },
    "section": {
      "type": "object",
      "required": ["comp", "children"],
      "properties": {
        "comp": {"const": "section"},
        "if": {"$ref": "#/$defs/expression"},
        "title": {"type": ["string", "null"]},
        "children": {"$ref": "#/$defs/children"}
      }
    },
    "child": {
      "type": "object",
      "unevaluatedProperties": false,
      "required": ["key"],
      "properties": {
        "key": {"type": ["string", "integer"]},
        "width": {"type": "number", "minimum": 0, "maximum": 100}
      },
      "anyOf": [
        {},
        {"$ref": "#/$defs/composite-comp-object"}
      ]
    },
    "children": {
      "type": "array",
      "items": {"$ref": "#/$defs/child"}
    },
    "list": {
      "type": "object",
      "required": ["comp"],
      "properties": {
        "comp": {"const": "list"},
        "if": {"$ref": "#/$defs/expression"},
        "title": {"type": "string"}
      }
    },
    "text-field": {
      "type": "object",
      "required": ["comp", "label"],
      "properties": {
        "comp": {"const": "text-field"},
        "if": {"$ref": "#/$defs/expression"},
        "label": {"type": "string"}
      }
    },
    "number-field": {
      "type": "object",
      "required": ["comp", "label"],
      "properties": {
        "comp": {"const": "number-field"},
        "if": {"$ref": "#/$defs/expression"},
        "label": {"type": "string"},
        "step": {"type": "number"}
      }
    },
    "textarea": {
      "type": "object",
      "required": ["comp", "label"],
      "properties": {
        "comp": {"const": "textarea"},
        "if": {"$ref": "#/$defs/expression"},
        "label": {"type": "string"}
      }
    },
    "checkbox": {
      "type": "object",
      "required": ["comp", "label"],
      "properties": {
        "comp": {"const": "checkbox"},
        "if": {"$ref": "#/$defs/expression"},
        "label": {"type": "string"}
      }
    },
    "one-of-select": {
      "type": "object",
      "required": ["comp"],
      "properties": {
        "comp": {"const": "one-of-select"},
        "if": {"$ref": "#/$defs/expression"},
        "label": {"type": "string"}
      }
    },
    "expression": {
      "type": "object",
      "required": ["type", "expr"],
      "properties": {
        "type": {
          "type": "string",
          "enum": ["expr-eval", "js-fn"],
          "default": "expr-eval"
        },
        "expr": {
          "type": "string"
        }
      }
    }
  }
}